<?php
$viewModel = $this->viewModel()->getCurrent();
$entities = $viewModel->getVariable('collection');
?>

<?php if (!count($entities)): ?>
    <p class="lead">Entities not found</p>
<?php else: ?>
    <table class="table" style="table-layout:fixed;">
        <?= $this->render($viewModel->getChild('table-head')); ?>
        <?php
            foreach ($entities as $entity) {
                $rowViewModel = $viewModel->getChild('table-row');
                $rowViewModel->setVariable('entity', $entity);

                echo $this->render($rowViewModel);
            }
         ?>
    </table>
<?php endif; ?>
