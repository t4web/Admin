<?php
use Sebaks\Crud\View\Model\CreateViewModelInterface;
use Sebaks\Crud\View\Model\ReadViewModelInterface;
use Sebaks\Crud\View\Model\UpdateViewModelInterface;

/** @var T4webAdmin\View\Model\BaseViewModel $viewModel */
$viewModel = $this->viewModel()->getCurrent();

$formViewModel = $viewModel->getChild('form');
$formViewModel->setVariable('submitRoute', $viewModel->getVariable('submitRoute'));

if (($viewModel instanceof CreateViewModelInterface)
    || ($viewModel instanceof UpdateViewModelInterface)) {
    $formViewModel->setVariable('values', $viewModel->getInputData());
    $formViewModel->setVariable('errors', $viewModel->getErrors());
}
if ($viewModel instanceof ReadViewModelInterface) {
    $formViewModel->setVariable('values', $viewModel->getVariable('entity')->extract());
}

?>

<section class="content-header">
    <h1><?= $viewModel->getVariable('title', 'Create entity') ?></h1>
</section>
<section class="content">
    <div class="row">
        <div class="col-lg-12">
            <div class="box">
                <?= $this->render($formViewModel) ?>
            </div>
        </div>
    </div>
</section>
