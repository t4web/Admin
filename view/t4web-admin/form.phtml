<?php
/** @var T4webAdmin\View\Model\FormViewModel $formViewModel */
$formViewModel = $this->viewModel()->getCurrent();
$errors = $formViewModel->getErrors();
$values = $formViewModel->getValues();
?>

<form method="post" action="<?= $this->url($formViewModel->getVariable('route'), ['controller' => 'create']) ?>">
    <div class="box-body">
        <?php foreach ($formViewModel->getChildren() as $children): ?>
            <?php
            if (isset($values[$children->getVariable('name')])) {
                $children->setVariable('value', $values[$children->getVariable('name')]);
            }
            if (isset($errors[$children->getVariable('name')])) {
                $children->setVariable('errors', $errors[$children->getVariable('name')]);
            }
            ?>
            <?= $this->render($children) ?>
        <?php endforeach; ?>
    </div>
    <div class="box-footer">
        <button type="submit" class="btn btn-success" style="margin: 10px 10px">Create</button>
        <a class="btn btn-default" href="<?= $this->url($formViewModel->getVariable('route')) ?>">Cancel</a>
    </div>
</form>
